<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="rendering_8py" kind="file" language="Python">
    <compoundname>rendering.py</compoundname>
    <innerclass refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer" prot="public">f110_gym::envs::rendering::EnvRenderer</innerclass>
    <innernamespace refid="namespacef110__gym_1_1envs_1_1rendering">f110_gym::envs::rendering</innernamespace>
    <innernamespace refid="namespacepyglet_1_1gl">pyglet::gl</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">#<sp/>MIT<sp/>License</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Copyright<sp/>(c)<sp/>2020<sp/>Joseph<sp/>Auckley,<sp/>Matthew<sp/>O&apos;Kelly,<sp/>Aman<sp/>Sinha,<sp/>Hongrui<sp/>Zheng</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Permission<sp/>is<sp/>hereby<sp/>granted,<sp/>free<sp/>of<sp/>charge,<sp/>to<sp/>any<sp/>person<sp/>obtaining<sp/>a<sp/>copy</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">#<sp/>of<sp/>this<sp/>software<sp/>and<sp/>associated<sp/>documentation<sp/>files<sp/>(the<sp/>&quot;Software&quot;),<sp/>to<sp/>deal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">#<sp/>in<sp/>the<sp/>Software<sp/>without<sp/>restriction,<sp/>including<sp/>without<sp/>limitation<sp/>the<sp/>rights</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="comment">#<sp/>to<sp/>use,<sp/>copy,<sp/>modify,<sp/>merge,<sp/>publish,<sp/>distribute,<sp/>sublicense,<sp/>and/or<sp/>sell</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">#<sp/>copies<sp/>of<sp/>the<sp/>Software,<sp/>and<sp/>to<sp/>permit<sp/>persons<sp/>to<sp/>whom<sp/>the<sp/>Software<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="comment">#<sp/>furnished<sp/>to<sp/>do<sp/>so,<sp/>subject<sp/>to<sp/>the<sp/>following<sp/>conditions:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="comment">#<sp/>The<sp/>above<sp/>copyright<sp/>notice<sp/>and<sp/>this<sp/>permission<sp/>notice<sp/>shall<sp/>be<sp/>included<sp/>in<sp/>all</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="comment">#<sp/>copies<sp/>or<sp/>substantial<sp/>portions<sp/>of<sp/>the<sp/>Software.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">#<sp/>THE<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>&quot;AS<sp/>IS&quot;,<sp/>WITHOUT<sp/>WARRANTY<sp/>OF<sp/>ANY<sp/>KIND,<sp/>EXPRESS<sp/>OR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="comment">#<sp/>IMPLIED,<sp/>INCLUDING<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO<sp/>THE<sp/>WARRANTIES<sp/>OF<sp/>MERCHANTABILITY,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="comment">#<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE<sp/>AND<sp/>NONINFRINGEMENT.<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="comment">#<sp/>AUTHORS<sp/>OR<sp/>COPYRIGHT<sp/>HOLDERS<sp/>BE<sp/>LIABLE<sp/>FOR<sp/>ANY<sp/>CLAIM,<sp/>DAMAGES<sp/>OR<sp/>OTHER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="comment">#<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>AN<sp/>ACTION<sp/>OF<sp/>CONTRACT,<sp/>TORT<sp/>OR<sp/>OTHERWISE,<sp/>ARISING<sp/>FROM,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="comment">#<sp/>OUT<sp/>OF<sp/>OR<sp/>IN<sp/>CONNECTION<sp/>WITH<sp/>THE<sp/>SOFTWARE<sp/>OR<sp/>THE<sp/>USE<sp/>OR<sp/>OTHER<sp/>DEALINGS<sp/>IN<sp/>THE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="comment">#<sp/>SOFTWARE.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral">Rendering<sp/>engine<sp/>for<sp/>f1tenth<sp/>gym<sp/>env<sp/>based<sp/>on<sp/>pyglet<sp/>and<sp/>OpenGL</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral">Author:<sp/>Hongrui<sp/>Zheng</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="comment">#<sp/>opengl<sp/>stuff</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pyglet</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacepyglet_1_1gl" kindref="compound">pyglet.gl</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="comment">#<sp/>other</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>np</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>PIL<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Image</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>yaml</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="comment">#<sp/>helpers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacef110__gym_1_1envs_1_1collision__models" kindref="compound">f110_gym.envs.collision_models</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_vertices</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="comment">#<sp/>zooming<sp/>constants</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal">ZOOM_IN_FACTOR<sp/>=<sp/>1.2</highlight></codeline>
<codeline lineno="44"><highlight class="normal">ZOOM_OUT_FACTOR<sp/>=<sp/>1/ZOOM_IN_FACTOR</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="comment">#<sp/>vehicle<sp/>shape<sp/>constants</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal">CAR_LENGTH<sp/>=<sp/>0.58</highlight></codeline>
<codeline lineno="48"><highlight class="normal">CAR_WIDTH<sp/>=<sp/>0.31</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50" refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer" kindref="compound">EnvRenderer</ref>(pyglet.window.Window):</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="52"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>A<sp/>window<sp/>class<sp/>inherited<sp/>from<sp/>pyglet.window.Window,<sp/>handles<sp/>the<sp/>camera/projection<sp/>interaction,<sp/>resizing<sp/>window,<sp/>and<sp/>rendering<sp/>the<sp/>environment</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a1b24abdbb4d13744255ebfdb3d509354" kindref="member">__init__</ref>(self,<sp/>width,<sp/>height,<sp/>*args,<sp/>**kwargs):</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="56"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Class<sp/>constructor</highlight></codeline>
<codeline lineno="57"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="58"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="59"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>width<sp/>(int):<sp/>width<sp/>of<sp/>the<sp/>window</highlight></codeline>
<codeline lineno="60"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>height<sp/>(int):<sp/>height<sp/>of<sp/>the<sp/>window</highlight></codeline>
<codeline lineno="61"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="62"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="63"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="64"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf<sp/>=<sp/>Config(sample_buffers=1,</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>samples=4,</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>depth_size=16,</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>double_buffer=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super().<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a1b24abdbb4d13744255ebfdb3d509354" kindref="member">__init__</ref>(width,<sp/>height,<sp/>config=conf,<sp/>resizable=</highlight><highlight class="keyword">True</highlight><highlight class="normal">,<sp/>vsync=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,<sp/>*args,<sp/>**kwargs)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>gl<sp/>init</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glClearColor(9/255,<sp/>32/255,<sp/>87/255,<sp/>1.)</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>initialize<sp/>camera<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a10e0980201fca6f3392fc5c333a6ad99" kindref="member">left</ref><sp/>=<sp/>-width/2</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1acb665a6f4d150da3b2159b1cd86f4117" kindref="member">right</ref><sp/>=<sp/>width/2</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ab6f1d3bbdf185a2489a9c444413e72b6" kindref="member">bottom</ref><sp/>=<sp/>-height/2</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a6e8e1a6e3f6c1f681f0fcbe6c04ffc27" kindref="member">top</ref><sp/>=<sp/>height/2</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>=<sp/>1.2</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1af71d3702c2e9fa5e8e109111b4a337ce" kindref="member">zoomed_width</ref><sp/>=<sp/>width</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a769be9782b9452fd8c3c1984985e419b" kindref="member">zoomed_height</ref><sp/>=<sp/>height</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>current<sp/>batch<sp/>that<sp/>keeps<sp/>track<sp/>of<sp/>all<sp/>graphics</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a0f6f622b6ffe98f7ee038c2ce72af276" kindref="member">batch</ref><sp/>=<sp/>pyglet.graphics.Batch()</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>current<sp/>env<sp/>map</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ae423459dd9ee2da53cf7929e4591e366" kindref="member">map_points</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>current<sp/>env<sp/>agent<sp/>poses,<sp/>(num_agents,<sp/>3),<sp/>columns<sp/>are<sp/>(x,<sp/>y,<sp/>theta)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a227e60c781a0e50f827ea2f4f11a3f85" kindref="member">poses</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>current<sp/>env<sp/>agent<sp/>vertices,<sp/>(num_agents,<sp/>4,<sp/>2),<sp/>2nd<sp/>and<sp/>3rd<sp/>dimensions<sp/>are<sp/>the<sp/>4<sp/>corners<sp/>in<sp/>2D</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a8a458f2ce6a733888d1a6bfaab243f31" kindref="member">vertices</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>current<sp/>score<sp/>label</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ad3328a46ae8641dc60b24d53219ffcb3" kindref="member">score_label</ref><sp/>=<sp/>pyglet.text.Label(</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Lap<sp/>Time:<sp/>{laptime:.2f},<sp/>Ego<sp/>Lap<sp/>Count:<sp/>{count:.0f}&apos;</highlight><highlight class="normal">.format(</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>laptime=0.0,<sp/>count=0.0),</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>font_size=36,</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x=0,</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y=-800,</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>anchor_x=</highlight><highlight class="stringliteral">&apos;center&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>anchor_y=</highlight><highlight class="stringliteral">&apos;center&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>width=0.01,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>height=0.01,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color=(255,<sp/>255,<sp/>255,<sp/>255),</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>batch=self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a0f6f622b6ffe98f7ee038c2ce72af276" kindref="member">batch</ref>)</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a2ecadd7a3ea2a4525bd7b0b4d362db81" kindref="member">fps_display</ref><sp/>=<sp/>pyglet.window.FPSDisplay(self)</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ae9c12c08c2f799504b6390b2d0ffda3f" kindref="member">update_map</ref>(self,<sp/>map_path,<sp/>map_ext):</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="113"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Update<sp/>the<sp/>map<sp/>being<sp/>drawn<sp/>by<sp/>the<sp/>renderer.<sp/>Converts<sp/>image<sp/>to<sp/>a<sp/>list<sp/>of<sp/>3D<sp/>points<sp/>representing<sp/>each<sp/>obstacle<sp/>pixel<sp/>in<sp/>the<sp/>map.</highlight></codeline>
<codeline lineno="114"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="115"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="116"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_path<sp/>(str):<sp/>absolute<sp/>path<sp/>to<sp/>the<sp/>map<sp/>without<sp/>extensions</highlight></codeline>
<codeline lineno="117"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_ext<sp/>(str):<sp/>extension<sp/>for<sp/>the<sp/>map<sp/>image<sp/>file</highlight></codeline>
<codeline lineno="118"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="119"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="120"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="121"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>load<sp/>map<sp/>metadata</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(map_path<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;.yaml&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;r&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>yaml_stream:</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_metadata<sp/>=<sp/>yaml.safe_load(yaml_stream)</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_resolution<sp/>=<sp/>map_metadata[</highlight><highlight class="stringliteral">&apos;resolution&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>origin<sp/>=<sp/>map_metadata[</highlight><highlight class="stringliteral">&apos;origin&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>origin_x<sp/>=<sp/>origin[0]</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>origin_y<sp/>=<sp/>origin[1]</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>yaml.YAMLError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>ex:</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(ex)</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>load<sp/>map<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_img<sp/>=<sp/>np.array(Image.open(map_path<sp/>+<sp/>map_ext).transpose(Image.FLIP_TOP_BOTTOM)).astype(np.float64)</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_height<sp/>=<sp/>map_img.shape[0]</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_width<sp/>=<sp/>map_img.shape[1]</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>convert<sp/>map<sp/>pixels<sp/>to<sp/>coordinates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>range_x<sp/>=<sp/>np.arange(map_width)</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>range_y<sp/>=<sp/>np.arange(map_height)</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_x,<sp/>map_y<sp/>=<sp/>np.meshgrid(range_x,<sp/>range_y)</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_x<sp/>=<sp/>(map_x<sp/>*<sp/>map_resolution<sp/>+<sp/>origin_x).flatten()</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_y<sp/>=<sp/>(map_y<sp/>*<sp/>map_resolution<sp/>+<sp/>origin_y).flatten()</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_z<sp/>=<sp/>np.zeros(map_y.shape)</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_coords<sp/>=<sp/>np.vstack((map_x,<sp/>map_y,<sp/>map_z))</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>mask<sp/>and<sp/>only<sp/>leave<sp/>the<sp/>obstacle<sp/>points</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_mask<sp/>=<sp/>map_img<sp/>==<sp/>0.0</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_mask_flat<sp/>=<sp/>map_mask.flatten()</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map_points<sp/>=<sp/>50.<sp/>*<sp/>map_coords[:,<sp/>map_mask_flat].T</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(map_points.shape[0]):</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a0f6f622b6ffe98f7ee038c2ce72af276" kindref="member">batch</ref>.add(1,<sp/>GL_POINTS,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="stringliteral">&apos;v3f/stream&apos;</highlight><highlight class="normal">,<sp/>[map_points[i,<sp/>0],<sp/>map_points[i,<sp/>1],<sp/>map_points[i,<sp/>2]]),<sp/>(</highlight><highlight class="stringliteral">&apos;c3B/stream&apos;</highlight><highlight class="normal">,<sp/>[183,<sp/>193,<sp/>222]))</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ae423459dd9ee2da53cf7929e4591e366" kindref="member">map_points</ref><sp/>=<sp/>map_points</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ac8bbef5b8910515dd18c8a6624730898" kindref="member">on_resize</ref>(self,<sp/>width,<sp/>height):</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="158"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Callback<sp/>function<sp/>on<sp/>window<sp/>resize,<sp/>overrides<sp/>inherited<sp/>method,<sp/>and<sp/>updates<sp/>camera<sp/>values<sp/>on<sp/>top<sp/>of<sp/>the<sp/>inherited<sp/>on_resize()<sp/>method.</highlight></codeline>
<codeline lineno="159"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="160"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Potential<sp/>improvements<sp/>on<sp/>current<sp/>behavior:<sp/>zoom/pan<sp/>resets<sp/>on<sp/>window<sp/>resize.</highlight></codeline>
<codeline lineno="161"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="162"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="163"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>width<sp/>(int):<sp/>new<sp/>width<sp/>of<sp/>window</highlight></codeline>
<codeline lineno="164"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>height<sp/>(int):<sp/>new<sp/>height<sp/>of<sp/>window</highlight></codeline>
<codeline lineno="165"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="166"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="167"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="168"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>call<sp/>overrided<sp/>function</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super().<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ac8bbef5b8910515dd18c8a6624730898" kindref="member">on_resize</ref>(width,<sp/>height)</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>update<sp/>camera<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(width,<sp/>height)<sp/>=<sp/>self.get_size()</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a10e0980201fca6f3392fc5c333a6ad99" kindref="member">left</ref><sp/>=<sp/>-self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*<sp/>width/2</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1acb665a6f4d150da3b2159b1cd86f4117" kindref="member">right</ref><sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*<sp/>width/2</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ab6f1d3bbdf185a2489a9c444413e72b6" kindref="member">bottom</ref><sp/>=<sp/>-self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*<sp/>height/2</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a6e8e1a6e3f6c1f681f0fcbe6c04ffc27" kindref="member">top</ref><sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*<sp/>height/2</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1af71d3702c2e9fa5e8e109111b4a337ce" kindref="member">zoomed_width</ref><sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*<sp/>width</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a769be9782b9452fd8c3c1984985e419b" kindref="member">zoomed_height</ref><sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*<sp/>height</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a557710400bb370a7509dbc17658eadd8" kindref="member">on_mouse_drag</ref>(self,<sp/>x,<sp/>y,<sp/>dx,<sp/>dy,<sp/>buttons,<sp/>modifiers):</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="184"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Callback<sp/>function<sp/>on<sp/>mouse<sp/>drag,<sp/>overrides<sp/>inherited<sp/>method.</highlight></codeline>
<codeline lineno="185"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="186"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>(int):<sp/>Distance<sp/>in<sp/>pixels<sp/>from<sp/>the<sp/>left<sp/>edge<sp/>of<sp/>the<sp/>window.</highlight></codeline>
<codeline lineno="188"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>(int):<sp/>Distance<sp/>in<sp/>pixels<sp/>from<sp/>the<sp/>bottom<sp/>edge<sp/>of<sp/>the<sp/>window.</highlight></codeline>
<codeline lineno="189"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dx<sp/>(int):<sp/>Relative<sp/>X<sp/>position<sp/>from<sp/>the<sp/>previous<sp/>mouse<sp/>position.</highlight></codeline>
<codeline lineno="190"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dy<sp/>(int):<sp/>Relative<sp/>Y<sp/>position<sp/>from<sp/>the<sp/>previous<sp/>mouse<sp/>position.</highlight></codeline>
<codeline lineno="191"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>buttons<sp/>(int):<sp/>Bitwise<sp/>combination<sp/>of<sp/>the<sp/>mouse<sp/>buttons<sp/>currently<sp/>pressed.</highlight></codeline>
<codeline lineno="192"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>modifiers<sp/>(int):<sp/>Bitwise<sp/>combination<sp/>of<sp/>any<sp/>keyboard<sp/>modifiers<sp/>currently<sp/>active.</highlight></codeline>
<codeline lineno="193"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="194"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="195"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="196"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>pan<sp/>camera</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a10e0980201fca6f3392fc5c333a6ad99" kindref="member">left</ref><sp/>-=<sp/>dx<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1acb665a6f4d150da3b2159b1cd86f4117" kindref="member">right</ref><sp/>-=<sp/>dx<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ab6f1d3bbdf185a2489a9c444413e72b6" kindref="member">bottom</ref><sp/>-=<sp/>dy<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a6e8e1a6e3f6c1f681f0fcbe6c04ffc27" kindref="member">top</ref><sp/>-=<sp/>dy<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref></highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a10f7c38d921015b5574ba0c858a245bb" kindref="member">on_mouse_scroll</ref>(self,<sp/>x,<sp/>y,<sp/>dx,<sp/>dy):</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="206"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Callback<sp/>function<sp/>on<sp/>mouse<sp/>scroll,<sp/>overrides<sp/>inherited<sp/>method.</highlight></codeline>
<codeline lineno="207"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="208"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="209"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>(int):<sp/>Distance<sp/>in<sp/>pixels<sp/>from<sp/>the<sp/>left<sp/>edge<sp/>of<sp/>the<sp/>window.</highlight></codeline>
<codeline lineno="210"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>(int):<sp/>Distance<sp/>in<sp/>pixels<sp/>from<sp/>the<sp/>bottom<sp/>edge<sp/>of<sp/>the<sp/>window.</highlight></codeline>
<codeline lineno="211"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scroll_x<sp/>(float):<sp/>Amount<sp/>of<sp/>movement<sp/>on<sp/>the<sp/>horizontal<sp/>axis.</highlight></codeline>
<codeline lineno="212"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scroll_y<sp/>(float):<sp/>Amount<sp/>of<sp/>movement<sp/>on<sp/>the<sp/>vertical<sp/>axis.</highlight></codeline>
<codeline lineno="213"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="214"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="215"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="216"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Get<sp/>scale<sp/>factor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/>ZOOM_IN_FACTOR<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dy<sp/>&gt;<sp/>0<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>ZOOM_OUT_FACTOR<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dy<sp/>&lt;<sp/>0<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>1</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>If<sp/>zoom_level<sp/>is<sp/>in<sp/>the<sp/>proper<sp/>range</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>.01<sp/>&lt;<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*<sp/>f<sp/>&lt;<sp/>10:</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a46bb51fb7c77939d2c4b023cfe2ca867" kindref="member">zoom_level</ref><sp/>*=<sp/>f</highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(width,<sp/>height)<sp/>=<sp/>self.get_size()</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mouse_x<sp/>=<sp/>x/width</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mouse_y<sp/>=<sp/>y/height</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mouse_x_in_world<sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a10e0980201fca6f3392fc5c333a6ad99" kindref="member">left</ref><sp/>+<sp/>mouse_x*self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1af71d3702c2e9fa5e8e109111b4a337ce" kindref="member">zoomed_width</ref></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mouse_y_in_world<sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ab6f1d3bbdf185a2489a9c444413e72b6" kindref="member">bottom</ref><sp/>+<sp/>mouse_y*self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a769be9782b9452fd8c3c1984985e419b" kindref="member">zoomed_height</ref></highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1af71d3702c2e9fa5e8e109111b4a337ce" kindref="member">zoomed_width</ref><sp/>*=<sp/>f</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a769be9782b9452fd8c3c1984985e419b" kindref="member">zoomed_height</ref><sp/>*=<sp/>f</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a10e0980201fca6f3392fc5c333a6ad99" kindref="member">left</ref><sp/>=<sp/>mouse_x_in_world<sp/>-<sp/>mouse_x<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1af71d3702c2e9fa5e8e109111b4a337ce" kindref="member">zoomed_width</ref></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1acb665a6f4d150da3b2159b1cd86f4117" kindref="member">right</ref><sp/>=<sp/>mouse_x_in_world<sp/>+<sp/>(1<sp/>-<sp/>mouse_x)<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1af71d3702c2e9fa5e8e109111b4a337ce" kindref="member">zoomed_width</ref></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ab6f1d3bbdf185a2489a9c444413e72b6" kindref="member">bottom</ref><sp/>=<sp/>mouse_y_in_world<sp/>-<sp/>mouse_y<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a769be9782b9452fd8c3c1984985e419b" kindref="member">zoomed_height</ref></highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a6e8e1a6e3f6c1f681f0fcbe6c04ffc27" kindref="member">top</ref><sp/>=<sp/>mouse_y_in_world<sp/>+<sp/>(1<sp/>-<sp/>mouse_y)<sp/>*<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a769be9782b9452fd8c3c1984985e419b" kindref="member">zoomed_height</ref></highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a05cb0faf5893e3cbed58cf20d0997bf7" kindref="member">on_close</ref>(self):</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="244"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Callback<sp/>function<sp/>when<sp/>the<sp/>&apos;x&apos;<sp/>is<sp/>clicked<sp/>on<sp/>the<sp/>window,<sp/>overrides<sp/>inherited<sp/>method.<sp/>Also<sp/>throws<sp/>exception<sp/>to<sp/>end<sp/>the<sp/>python<sp/>program<sp/>when<sp/>in<sp/>a<sp/>loop.</highlight></codeline>
<codeline lineno="245"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="246"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="247"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="248"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="249"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="250"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="251"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="252"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="253"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Exception:<sp/>with<sp/>a<sp/>message<sp/>that<sp/>indicates<sp/>the<sp/>rendering<sp/>window<sp/>was<sp/>closed</highlight></codeline>
<codeline lineno="254"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super().<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a05cb0faf5893e3cbed58cf20d0997bf7" kindref="member">on_close</ref>()</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Rendering<sp/>window<sp/>was<sp/>closed.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a0cbcdabef2cdda765d6721ca796ecfd0" kindref="member">on_draw</ref>(self):</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="261"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Function<sp/>when<sp/>the<sp/>pyglet<sp/>is<sp/>drawing.<sp/>The<sp/>function<sp/>draws<sp/>the<sp/>batch<sp/>created<sp/>that<sp/>includes<sp/>the<sp/>map<sp/>points,<sp/>the<sp/>agent<sp/>polygons,<sp/>and<sp/>the<sp/>information<sp/>text,<sp/>and<sp/>the<sp/>fps<sp/>display.</highlight></codeline>
<codeline lineno="262"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="263"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="264"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="265"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="266"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="267"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="268"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>if<sp/>map<sp/>and<sp/>poses<sp/>doesn&apos;t<sp/>exist,<sp/>raise<sp/>exception</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ae423459dd9ee2da53cf7929e4591e366" kindref="member">map_points</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Map<sp/>not<sp/>set<sp/>for<sp/>renderer.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a227e60c781a0e50f827ea2f4f11a3f85" kindref="member">poses</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Agent<sp/>poses<sp/>not<sp/>updated<sp/>for<sp/>renderer.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Initialize<sp/>Projection<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glMatrixMode(GL_PROJECTION)</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glLoadIdentity()</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Initialize<sp/>Modelview<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glMatrixMode(GL_MODELVIEW)</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glLoadIdentity()</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Save<sp/>the<sp/>default<sp/>modelview<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glPushMatrix()</highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Clear<sp/>window<sp/>with<sp/>ClearColor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glClear(GL_COLOR_BUFFER_BIT<sp/>|<sp/>GL_DEPTH_BUFFER_BIT)</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Set<sp/>orthographic<sp/>projection<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glOrtho(self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a10e0980201fca6f3392fc5c333a6ad99" kindref="member">left</ref>,<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1acb665a6f4d150da3b2159b1cd86f4117" kindref="member">right</ref>,<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ab6f1d3bbdf185a2489a9c444413e72b6" kindref="member">bottom</ref>,<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a6e8e1a6e3f6c1f681f0fcbe6c04ffc27" kindref="member">top</ref>,<sp/>1,<sp/>-1)</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Draw<sp/>all<sp/>batches</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a0f6f622b6ffe98f7ee038c2ce72af276" kindref="member">batch</ref>.draw()</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a2ecadd7a3ea2a4525bd7b0b4d362db81" kindref="member">fps_display</ref>.draw()</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Remove<sp/>default<sp/>modelview<sp/>matrix</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>glPopMatrix()</highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a1b9284f2e59c9000f10bd18e1ec6a9b3" kindref="member">update_obs</ref>(self,<sp/>obs):</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="300"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Updates<sp/>the<sp/>renderer<sp/>with<sp/>the<sp/>latest<sp/>observation<sp/>from<sp/>the<sp/>gym<sp/>environment,<sp/>including<sp/>the<sp/>agent<sp/>poses,<sp/>and<sp/>the<sp/>information<sp/>text.</highlight></codeline>
<codeline lineno="301"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="302"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="303"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obs<sp/>(dict):<sp/>observation<sp/>dict<sp/>from<sp/>the<sp/>gym<sp/>env</highlight></codeline>
<codeline lineno="304"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="305"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="306"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="307"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ad2c50c6e7d890771c7173768b6eef5c2" kindref="member">ego_idx</ref><sp/>=<sp/>obs[</highlight><highlight class="stringliteral">&apos;ego_idx&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>poses_x<sp/>=<sp/>obs[</highlight><highlight class="stringliteral">&apos;poses_x&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>poses_y<sp/>=<sp/>obs[</highlight><highlight class="stringliteral">&apos;poses_y&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>poses_theta<sp/>=<sp/>obs[</highlight><highlight class="stringliteral">&apos;poses_theta&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_agents<sp/>=<sp/>len(poses_x)</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a227e60c781a0e50f827ea2f4f11a3f85" kindref="member">poses</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a4d90f610c36a7c83b054a2233276f36a" kindref="member">cars</ref><sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(num_agents):</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i<sp/>==<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ad2c50c6e7d890771c7173768b6eef5c2" kindref="member">ego_idx</ref>:</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices_np<sp/>=<sp/>get_vertices(np.array([0.,<sp/>0.,<sp/>0.]),<sp/>CAR_LENGTH,<sp/>CAR_WIDTH)</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices<sp/>=<sp/>list(vertices_np.flatten())</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>car<sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a0f6f622b6ffe98f7ee038c2ce72af276" kindref="member">batch</ref>.add(4,<sp/>GL_QUADS,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="stringliteral">&apos;v2f&apos;</highlight><highlight class="normal">,<sp/>vertices),<sp/>(</highlight><highlight class="stringliteral">&apos;c3B&apos;</highlight><highlight class="normal">,<sp/>[172,<sp/>97,<sp/>185,<sp/>172,<sp/>97,<sp/>185,<sp/>172,<sp/>97,<sp/>185,<sp/>172,<sp/>97,<sp/>185]))</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a4d90f610c36a7c83b054a2233276f36a" kindref="member">cars</ref>.append(car)</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices_np<sp/>=<sp/>get_vertices(np.array([0.,<sp/>0.,<sp/>0.]),<sp/>CAR_LENGTH,<sp/>CAR_WIDTH)</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices<sp/>=<sp/>list(vertices_np.flatten())</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>car<sp/>=<sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a0f6f622b6ffe98f7ee038c2ce72af276" kindref="member">batch</ref>.add(4,<sp/>GL_QUADS,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="stringliteral">&apos;v2f&apos;</highlight><highlight class="normal">,<sp/>vertices),<sp/>(</highlight><highlight class="stringliteral">&apos;c3B&apos;</highlight><highlight class="normal">,<sp/>[99,<sp/>52,<sp/>94,<sp/>99,<sp/>52,<sp/>94,<sp/>99,<sp/>52,<sp/>94,<sp/>99,<sp/>52,<sp/>94]))</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a4d90f610c36a7c83b054a2233276f36a" kindref="member">cars</ref>.append(car)</highlight></codeline>
<codeline lineno="328"><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>poses<sp/>=<sp/>np.stack((poses_x,<sp/>poses_y,<sp/>poses_theta)).T</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>j<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(poses.shape[0]):</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices_np<sp/>=<sp/>50.<sp/>*<sp/>get_vertices(poses[j,<sp/>:],<sp/>CAR_LENGTH,<sp/>CAR_WIDTH)</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices<sp/>=<sp/>list(vertices_np.flatten())</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a4d90f610c36a7c83b054a2233276f36a" kindref="member">cars</ref>[j].vertices<sp/>=<sp/>vertices</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1a227e60c781a0e50f827ea2f4f11a3f85" kindref="member">poses</ref><sp/>=<sp/>poses</highlight></codeline>
<codeline lineno="335"><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classf110__gym_1_1envs_1_1rendering_1_1_env_renderer_1ad3328a46ae8641dc60b24d53219ffcb3" kindref="member">score_label</ref>.text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;Lap<sp/>Time:<sp/>{laptime:.2f},<sp/>Ego<sp/>Lap<sp/>Count:<sp/>{count:.0f}&apos;</highlight><highlight class="normal">.format(laptime=obs[</highlight><highlight class="stringliteral">&apos;lap_times&apos;</highlight><highlight class="normal">][0],<sp/>count=obs[</highlight><highlight class="stringliteral">&apos;lap_counts&apos;</highlight><highlight class="normal">][obs[</highlight><highlight class="stringliteral">&apos;ego_idx&apos;</highlight><highlight class="normal">]])</highlight></codeline>
    </programlisting>
    <location file="/home/billyzheng/f1tenth_gym/gym/f110_gym/envs/rendering.py"/>
  </compounddef>
</doxygen>
